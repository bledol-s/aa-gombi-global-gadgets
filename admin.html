<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Admin - AA GOMBI GLOBAL GADGETS</title>
  <link rel="stylesheet" href="assets/css/style.css" />
  <style>
    .admin-form { max-width:700px; margin:30px auto; padding:20px; border:1px solid #eee; border-radius:8px; background:#fff; }
    .admin-form label { display:block; margin-top:12px; font-weight:600; }
    .admin-form input, .admin-form textarea { width:100%; padding:8px; margin-top:6px; border-radius:6px; border:1px solid #ccc; }
    .admin-form button { margin-top:12px; background:#6A0DAD;color:#FFD700;border:none;padding:10px 14px;border-radius:6px;font-weight:700; cursor:pointer; }
    .product-preview { margin-top:14px; display:flex; gap:12px; align-items:center; }
    .product-preview img { width:80px; height:80px; object-fit:cover; border-radius:6px; }
    .note { font-size:13px; color:#555; margin-top:8px; }
  </style>
</head>
<body>
  <header class="header">
    <div class="container">
      <img src="assets/images/logo.png" alt="logo" style="height:50px;vertical-align:middle;margin-right:12px;">
      <h1 class="logo" style="display:inline-block;vertical-align:middle;">AA GOMBI GLOBAL GADGETS - Admin</h1>
    </div>
  </header>

  <main class="container">
    <section class="admin-form">
      <h2>Add a Product</h2>
      <p class="note">Images: use a path like <code>assets/images/yourfile.jpg</code> or a full image URL. This admin is client-side only.</p>

      <label for="p-name">Product Name</label>
      <input id="p-name" />

      <label for="p-price">Price (number)</label>
      <input id="p-price" type="number" />

      <label for="p-image">Image path or URL</label>
      <input id="p-image" placeholder="assets/images/myphoto.jpg" />

      <label for="p-desc">Short Description</label>
      <textarea id="p-desc" rows="3"></textarea>

      <button id="save-product">Save Product</button>

      <div class="product-preview" id="product-preview" style="display:none;">
        <img id="preview-img" src="" alt="preview"/>
        <div>
          <strong id="preview-name"></strong>
          <p id="preview-price"></p>
        </div>
      </div>
    </section>

    <section style="margin-top:30px;">
      <h3>Existing Products (local)</h3>
      <div id="admin-products-list"></div>
    </section>
  </main>

  <script>
    // Admin client JS
    function loadStoredProducts() {
      const s = JSON.parse(localStorage.getItem('products'));
      return (Array.isArray(s) && s.length) ? s : null;
    }

    function saveStoredProducts(list) {
      localStorage.setItem('products', JSON.stringify(list));
    }

    const nameEl = document.getElementById('p-name');
    const priceEl = document.getElementById('p-price');
    const imageEl = document.getElementById('p-image');
    const descEl = document.getElementById('p-desc');
    const preview = document.getElementById('product-preview');
    const previewImg = document.getElementById('preview-img');
    const previewName = document.getElementById('preview-name');
    const previewPrice = document.getElementById('preview-price');
    const listEl = document.getElementById('admin-products-list');

    function refreshAdminList() {
      const list = loadStoredProducts() || [];
      listEl.innerHTML = '';
      list.forEach((p, idx) => {
        const d = document.createElement('div');
        d.style = 'border:1px solid #eee;padding:12px;margin-bottom:8px;border-radius:6px;display:flex;gap:12px;align-items:center;';
        d.innerHTML = `<img src="${p.image}" style="width:70px;height:70px;object-fit:cover;border-radius:6px;" />
                       <div>
                         <strong>${p.name}</strong><br/>
                         <small>₦${Number(p.price).toLocaleString()}</small>
                       </div>
                       <div style="margin-left:auto;">
                         <button onclick="removeProduct(${idx})" style="background:#c0392b;color:white;border:none;padding:8px;border-radius:6px;cursor:pointer;">Delete</button>
                       </div>`;
        listEl.appendChild(d);
      });
    }

    function removeProduct(i) {
      const arr = loadStoredProducts() || [];
      arr.splice(i,1);
      saveStoredProducts(arr);
      refreshAdminList();
      alert('Product removed locally.');
    }

    imageEl.addEventListener('input', () => {
      const val = imageEl.value.trim();
      if (!val) { preview.style.display='none'; return; }
      preview.style.display = 'flex';
      previewImg.src = val;
      previewName.textContent = nameEl.value || 'Preview';
      previewPrice.textContent = priceEl.value ? `₦${Number(priceEl.value).toLocaleString()}` : '';
    });

    document.getElementById('save-product').addEventListener('click', () => {
      const name = nameEl.value.trim();
      const price = Number(priceEl.value);
      const image = imageEl.value.trim();
      const desc = descEl.value.trim();

      if (!name || !price || !image) {
        alert('Please provide name, price and image path/url.');
        return;
      }

      const current = loadStoredProducts() || [];
      current.push({ name, price, image, desc });
      saveStoredProducts(current);
      nameEl.value = priceEl.value = imageEl.value = descEl.value = '';
      preview.style.display='none';
      refreshAdminList();
      alert('Product added locally. Refresh product page to see it.');
    });

    // initialize
    refreshAdminList();
  </script>
</body>
</html>
